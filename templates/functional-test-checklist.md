# 🧪 基本機能テストチェックリスト

## QualityManager必須確認項目

このチェックリストは、QualityManagerがDeveloperからの完了報告を受け取った際に、**実際にアプリケーションを動かして確認**する項目です。

### 🚨 Priority 1: アプリケーション起動確認

#### 起動テスト
- [ ] **`npm install` が正常に完了する**
- [ ] **`npm run dev` でエラーが出ない**
- [ ] **開発サーバーが正常に起動する**
- [ ] **ポート（3000/3001等）でサーバーが応答する**
- [ ] **プロセスが異常終了しない**

#### エラーログ確認
- [ ] **起動時にエラーメッセージが出ない**
- [ ] **Warning程度のメッセージのみ（Critical/Error がない）**
- [ ] **依存関係の不足エラーがない**
- [ ] **ポート競合エラーがない**

### 🌐 Priority 2: HTTP応答確認

#### 基本アクセス
- [ ] **`curl http://localhost:3000` で200応答**
- [ ] **ブラウザで `http://localhost:3000` が開ける**
- [ ] **HTMLコンテンツが返される**
- [ ] **空白ページではない**

#### コンテンツ確認
- [ ] **HTMLタグが正しく構成されている**
- [ ] **文字化けしていない**
- [ ] **基本的なページ構造が表示される**

### 🎭 Priority 3: Playwright E2E自動テスト（推奨）

#### Playwright E2Eテスト実行
- [ ] **Playwrightがインストールされている（`npm list @playwright/test`）**
- [ ] **E2Eテストが実装されている（`tests/e2e/*.spec.ts`）**
- [ ] **`npx playwright test` が正常に実行される**
- [ ] **すべてのE2Eテストがパスする**

#### 自動テストカバレッジ
- [ ] **基本ページアクセステストが含まれている**
- [ ] **ボタンクリックテストが含まれている**
- [ ] **フォーム入力テストが含まれている**
- [ ] **レスポンシブテストが含まれている**

### 🖱️ Priority 4: UI動作確認（Playwright未使用時の手動確認）

#### ページ表示
- [ ] **ページが正常に読み込まれる**
- [ ] **CSS が適用されている**
- [ ] **レイアウトが意図通りに表示される**
- [ ] **画像・アイコンが正常に表示される**

#### インタラクション
- [ ] **すべてのボタンをクリックしてエラーが出ない**
  - プライマリボタン
  - セカンダリボタン  
  - リンクボタン
  - アイコンボタン

- [ ] **フォーム操作が正常に動作する**
  - テキスト入力
  - セレクトボックス
  - チェックボックス
  - ラジオボタン
  - ファイルアップロード

- [ ] **ナビゲーションが機能する**
  - メニュー切り替え
  - ページ遷移
  - 戻る/進むボタン

### ⚡ Priority 5: JavaScript動作確認

#### コンソールエラー
- [ ] **ブラウザのConsole（F12）にエラーが出ない**
- [ ] **Uncaught Error がない**
- [ ] **404 エラー（リソース不足）がない**
- [ ] **型エラー（TypeError）がない**

#### 基本動作
- [ ] **ページの動的な要素が正常に動作する**
- [ ] **クリックイベントが発火する**
- [ ] **フォーム送信が正常に処理される**
- [ ] **Ajax/API呼び出しがエラーにならない**

### 📱 Priority 6: レスポンシブ確認

#### デバイス対応
- [ ] **デスクトップ（1920x1080）で正常表示**
- [ ] **タブレット（768x1024）で正常表示**
- [ ] **スマートフォン（375x667）で正常表示**
- [ ] **横向き表示でも問題ない**

#### レイアウト
- [ ] **文字が読める大きさで表示される**
- [ ] **ボタンがタップしやすいサイズ**
- [ ] **スクロールが正常に動作する**
- [ ] **要素が画面からはみ出ない**

### 🔍 Priority 7: 機能固有テスト

#### TODOアプリの場合
- [ ] **新しいタスクを追加できる**
- [ ] **タスクを完了済みにできる**
- [ ] **タスクを削除できる**
- [ ] **タスク一覧が正常に表示される**
- [ ] **ローカルストレージが機能する（ページリロード後もデータが残る）**

#### ECサイトの場合
- [ ] **商品一覧が表示される**
- [ ] **検索機能が動作する**
- [ ] **商品詳細ページが開ける**
- [ ] **カートに追加できる**
- [ ] **購入フローが正常に動作する**

#### APIの場合
- [ ] **GET リクエストが正常に応答する**
- [ ] **POST リクエストが正常に処理される**
- [ ] **エラーレスポンスが適切**
- [ ] **認証が必要な場合は正しく動作する**

### 🛡️ Priority 8: エラーハンドリング確認

#### 不正入力テスト
- [ ] **空の入力でも適切なエラーメッセージ**
- [ ] **不正な文字列でも処理が継続される**
- [ ] **最大文字数を超えても対応できる**
- [ ] **特殊文字（<>'"&）でも問題ない**

#### ネットワークエラー
- [ ] **APIが応答しない場合の処理**
- [ ] **タイムアウト時の処理**
- [ ] **接続エラー時のユーザー通知**

### 📊 Priority 9: パフォーマンス基本確認

#### 応答時間
- [ ] **ページ読み込みが3秒以内**
- [ ] **ボタンクリック応答が1秒以内**
- [ ] **フォーム送信が5秒以内**

#### リソース使用量
- [ ] **メモリリークが発生しない**
- [ ] **CPU使用率が異常に高くない**
- [ ] **不要なネットワークリクエストがない**

## 🚨 即座修正要求が必要な致命的エラー

以下の問題が1つでも発見された場合は、**即座にDeveloperに修正指示**を出すこと：

### 起動エラー
- npm run dev が失敗する
- 依存関係エラーで起動しない
- ポート競合で起動しない
- 起動後にプロセスが異常終了する

### アクセスエラー  
- HTTP応答が200以外
- ページが表示されない
- 空白ページが表示される
- HTMLが正しく構成されていない

### 操作エラー
- ボタンクリックでエラーが発生
- フォーム送信が機能しない
- ページ遷移ができない
- コンソールに大量のエラー

### 機能エラー
- 基本機能が全く動作しない
- データの保存・取得ができない
- 要件で指定された機能が未実装

## Quality Manager 実行手順

### 1. 自動テスト実行
```bash
# 実動作確認テスト実行
./scripts/functional-test.sh

# 結果確認
cat workspace/$(./scripts/get-project-id.sh)/functional_test_report.md
```

### 2. Playwright E2Eテスト実行（推奨）
```bash
# プロジェクトディレクトリに移動
cd workspace/$(./scripts/get-project-id.sh)

# Playwrightテスト実行
if [ -f "playwright.config.ts" ] || [ -f "playwright.config.js" ]; then
    npx playwright test
    # レポート確認
    npx playwright show-report
else
    echo "Playwrightが未設定です。手動確認に進んでください。"
fi
```

### 3. 手動確認（Playwright未使用時）
```bash
# プロジェクトディレクトリに移動
cd workspace/$(./scripts/get-project-id.sh)

# アプリケーション起動
npm run dev

# ブラウザで確認
# http://localhost:3000 を開く
# 上記チェックリストに従って手動確認
```

### 4. エラー発見時の対応
```bash
# 修正指示送信
./scripts/agent-send.sh developer "【緊急修正要求】🚨

以下の致命的な問題が発見されました：

## 検知された問題
[具体的な問題内容]

## 再現手順
1. [手順1]
2. [手順2]
3. [エラー発生]

## 期待される動作
[正常な動作の説明]

## 修正が必要な項目
- [修正項目1]
- [修正項目2]

基本的な動作ができるまで修正してください。"
```

### 5. 修正完了後の再確認
修正報告を受けた後、必ず最初から確認を実行すること。

## 重要な注意事項

1. **実際にアプリケーションを動かす**: コードレビューだけでなく、必ず実動作確認
2. **エンドユーザー視点**: 開発者ではなく、実際のユーザーの立場で確認
3. **基本動作優先**: 高度な機能より、基本的な動作が確実に動くことを重視
4. **即座の修正指示**: 問題発見時は遠慮なく、具体的な修正指示を送信
5. **再確認の徹底**: 修正後は必ず最初から確認プロセスを実行
6. **Playwright E2Eテストの推奨**: 手動確認の前にPlaywright E2Eテストを実行することで、UI動作確認を自動化し、品質を向上させる

このチェックリストに従うことで、「npm run dev でボタンを押したらエラーが出る」といった基本的な問題を確実に検知し、高品質な成果物を保証できます。Playwright E2Eテストを導入することで、これらの確認を自動化し、より効率的で確実な品質保証が可能になります。